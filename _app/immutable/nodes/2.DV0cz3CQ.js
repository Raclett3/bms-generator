import{s as Qe,n as ke,r as Xe}from"../chunks/scheduler.BvLojk_z.js";import{S as Ze,i as $e,e as i,s as h,g as r,z as T,c as _,j as C,d,p as l,a as le,l as t,A as E,B as V,C as et,D as tt,f as nt,k as st,E as lt}from"../chunks/index.BonE5Z4V.js";import{b as at}from"../chunks/paths.ChS4lvv8.js";function Oe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}let M,oe=null;function it(){return(oe===null||oe.byteLength===0)&&(oe=new BigUint64Array(M.memory.buffer)),oe}let Ye=0;function rt(e,n){const s=n(e.length*8,8)>>>0;return it().set(e,s/8),Ye=e.length,s}let ue=null;function ze(){return(ue===null||ue.byteLength===0)&&(ue=new Int32Array(M.memory.buffer)),ue}const Ge=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Ge.decode();let ce=null;function ot(){return(ce===null||ce.byteLength===0)&&(ce=new Uint8Array(M.memory.buffer)),ce}function ut(e,n){return e=e>>>0,Ge.decode(ot().subarray(e,e+n))}function ct(e,n,s,c,m,L,v){try{const g=M.__wbindgen_add_to_stack_pointer(-16),S=rt(c,M.__wbindgen_malloc),x=Ye;M.generate_bms(g,e,n,s,S,x,m,L,v);var o=ze()[g/4+0],u=ze()[g/4+1];let j;return o!==0&&(j=ut(o,u).slice(),M.__wbindgen_free(o,u*1,1)),j}finally{M.__wbindgen_add_to_stack_pointer(16)}}async function pt(e,n){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,n)}catch(c){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",c);else throw c}const s=await e.arrayBuffer();return await WebAssembly.instantiate(s,n)}else{const s=await WebAssembly.instantiate(e,n);return s instanceof WebAssembly.Instance?{instance:s,module:e}:s}}function ft(){const e={};return e.wbg={},e}function dt(e,n){return M=e.exports,Ke.__wbindgen_wasm_module=n,oe=null,ue=null,ce=null,M}async function Ke(e){if(M!==void 0)return M;typeof e>"u"&&(e=new URL(""+new URL("../assets/wasm_bg.Cwm9DloJ.wasm",import.meta.url).href,import.meta.url));const n=ft();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:s,module:c}=await pt(await e,n);return dt(s,c)}const vt=async()=>{await Ke()},Ct=Object.freeze(Object.defineProperty({__proto__:null,load:vt},Symbol.toStringTag,{value:"Module"}));function Fe(e,n,s){const c=e.slice();return c[16]=n[s],c[17]=n,c[18]=s,c}function Je(e){let n,s,c=e[6][e[18]]+"",m,L,v,o,u,g="%",S,x,j;function I(){e[10].call(v,e[17],e[18])}return{c(){n=i("label"),s=i("p"),m=nt(c),L=h(),v=i("input"),o=h(),u=i("div"),u.textContent=g,S=h(),this.h()},l(b){n=r(b,"LABEL",{class:!0});var w=C(n);s=r(w,"P",{class:!0});var q=C(s);m=st(q,c),q.forEach(d),L=_(w),v=r(w,"INPUT",{type:!0,class:!0}),o=_(w),u=r(w,"DIV",{class:!0,"data-svelte-h":!0}),T(u)!=="svelte-ea08ca"&&(u.textContent=g),S=_(w),w.forEach(d),this.h()},h(){l(s,"class","svelte-a3jipi"),l(v,"type","test"),l(v,"class","svelte-a3jipi"),l(u,"class","unit svelte-a3jipi"),l(n,"class","svelte-a3jipi")},m(b,w){le(b,n,w),t(n,s),t(s,m),t(n,L),t(n,v),E(v,e[16]),t(n,o),t(n,u),t(n,S),x||(j=V(v,"input",I),x=!0)},p(b,w){e=b,w&8&&E(v,e[16])},d(b){b&&d(n),x=!1,j()}}}function ht(e){let n,s="BMS自動生成くん",c,m,L=`<summary class="svelte-a3jipi"><h2 class="svelte-a3jipi">つかいかた</h2></summary> <div class="usage svelte-a3jipi"><p>パラメータを指定して生成ボタンを押すことで、ランダムなBMSの譜面を生成することが出来ます。</p> <p><a href="${at}/bms-generator.zip">こちらのキー音</a>と同一のフォルダに入れてプレイヤーで読み込んでください。</p> <h3>譜面密度</h3> <p>n分間隔で降ってくるノーツの数を指定することが出来ます。</p> <p>例えば、100%を指定した場合1つ押し、200%を指定した場合は2つ押し、150%を指定した場合は1つ押しと2つ押しが半分ずつ生成されます。</p> <h3>縦連許容度</h3> <p>許容される縦連の長さを指定できます。</p> <p>xを指定した場合、x+1個までの縦連が生成されるようになります。</p> <p>小数を指定することもでき、例えば1.2を指定した場合は3個までの縦連が生成されますが、2を指定した場合に比べ出現率が下がります。</p> <h3>散らばり度</h3> <p>高い値を設定するほど、譜面の偏りを減らすことができます。負の値を設定することで、偏りを増やすことができます。</p> <p><b>極端に高い値(100など)を設定した場合、特定のパターンを繰り返す譜面が生成される場合があります。</b></p></div>`,v,o,u,g,S="基本情報",x,j,I,b,w="小節数",q,B,ae,A,U,ie="BPM",be,R,ye,k,Y,Ue="譜面密度",ge,G,je,te,D,K,De='<h2 class="svelte-a3jipi">詳細設定</h2>',we,O,Q,Pe="縦連許容度",Ce,W,Ee,X,z,Z,Se="散らばり度",Le,H,Ie,re,P,Ae,F,$,Re="シード",Te,N,Me,ne,We='<button type="submit" class="svelte-a3jipi">生成</button>',xe,He,se=Oe(e[3]),y=[];for(let a=0;a<se.length;a+=1)y[a]=Je(Fe(e,se,a));return{c(){n=i("h1"),n.textContent=s,c=h(),m=i("details"),m.innerHTML=L,v=h(),o=i("form"),u=i("div"),g=i("h2"),g.textContent=S,x=h(),j=i("div"),I=i("label"),b=i("p"),b.textContent=w,q=h(),B=i("input"),ae=h(),A=i("label"),U=i("p"),U.textContent=ie,be=h(),R=i("input"),ye=h(),k=i("div"),Y=i("h2"),Y.textContent=Ue,ge=h(),G=i("div");for(let a=0;a<y.length;a+=1)y[a].c();je=h(),te=i("div"),D=i("details"),K=i("summary"),K.innerHTML=De,we=h(),O=i("label"),Q=i("p"),Q.textContent=Pe,Ce=h(),W=i("input"),Ee=h(),X=i("div"),z=i("label"),Z=i("p"),Z.textContent=Se,Le=h(),H=i("input"),Ie=h(),re=i("p"),P=i("input"),Ae=h(),F=i("label"),$=i("p"),$.textContent=Re,Te=h(),N=i("input"),Me=h(),ne=i("p"),ne.innerHTML=We,this.h()},l(a){n=r(a,"H1",{"data-svelte-h":!0}),T(n)!=="svelte-1q97hvc"&&(n.textContent=s),c=_(a),m=r(a,"DETAILS",{"data-svelte-h":!0}),T(m)!=="svelte-18dn28v"&&(m.innerHTML=L),v=_(a),o=r(a,"FORM",{class:!0});var p=C(o);u=r(p,"DIV",{class:!0});var f=C(u);g=r(f,"H2",{class:!0,"data-svelte-h":!0}),T(g)!=="svelte-qgn4gq"&&(g.textContent=S),x=_(f),j=r(f,"DIV",{class:!0});var ee=C(j);I=r(ee,"LABEL",{class:!0});var pe=C(I);b=r(pe,"P",{class:!0,"data-svelte-h":!0}),T(b)!=="svelte-jsefv9"&&(b.textContent=w),q=_(pe),B=r(pe,"INPUT",{type:!0,class:!0}),pe.forEach(d),ae=_(ee),A=r(ee,"LABEL",{class:!0});var fe=C(A);U=r(fe,"P",{class:!0,"data-svelte-h":!0}),T(U)!=="svelte-1d7zxdh"&&(U.textContent=ie),be=_(fe),R=r(fe,"INPUT",{type:!0,class:!0}),fe.forEach(d),ee.forEach(d),f.forEach(d),ye=_(p),k=r(p,"DIV",{class:!0});var de=C(k);Y=r(de,"H2",{class:!0,"data-svelte-h":!0}),T(Y)!=="svelte-8mkqas"&&(Y.textContent=Ue),ge=_(de),G=r(de,"DIV",{class:!0});var Ne=C(G);for(let Be=0;Be<y.length;Be+=1)y[Be].l(Ne);Ne.forEach(d),de.forEach(d),je=_(p),te=r(p,"DIV",{class:!0});var Ve=C(te);D=r(Ve,"DETAILS",{});var J=C(D);K=r(J,"SUMMARY",{class:!0,"data-svelte-h":!0}),T(K)!=="svelte-5345tb"&&(K.innerHTML=De),we=_(J),O=r(J,"LABEL",{class:!0});var ve=C(O);Q=r(ve,"P",{class:!0,"data-svelte-h":!0}),T(Q)!=="svelte-yxr0l9"&&(Q.textContent=Pe),Ce=_(ve),W=r(ve,"INPUT",{type:!0,class:!0}),ve.forEach(d),Ee=_(J),X=r(J,"DIV",{});var he=C(X);z=r(he,"LABEL",{class:!0});var _e=C(z);Z=r(_e,"P",{class:!0,"data-svelte-h":!0}),T(Z)!=="svelte-ylofxc"&&(Z.textContent=Se),Le=_(_e),H=r(_e,"INPUT",{type:!0,class:!0}),_e.forEach(d),Ie=_(he),re=r(he,"P",{});var qe=C(re);P=r(qe,"INPUT",{type:!0,min:!0,max:!0,class:!0}),qe.forEach(d),he.forEach(d),Ae=_(J),F=r(J,"LABEL",{class:!0});var me=C(F);$=r(me,"P",{class:!0,"data-svelte-h":!0}),T($)!=="svelte-1v97jri"&&($.textContent=Re),Te=_(me),N=r(me,"INPUT",{type:!0,class:!0}),me.forEach(d),J.forEach(d),Ve.forEach(d),Me=_(p),ne=r(p,"P",{"data-svelte-h":!0}),T(ne)!=="svelte-1vtn6gv"&&(ne.innerHTML=We),p.forEach(d),this.h()},h(){l(g,"class","svelte-a3jipi"),l(b,"class","svelte-a3jipi"),l(B,"type","text"),l(B,"class","svelte-a3jipi"),l(I,"class","svelte-a3jipi"),l(U,"class","svelte-a3jipi"),l(R,"type","text"),l(R,"class","svelte-a3jipi"),l(A,"class","svelte-a3jipi"),l(j,"class","form-flex svelte-a3jipi"),l(u,"class","form-group svelte-a3jipi"),l(Y,"class","svelte-a3jipi"),l(G,"class","form-flex svelte-a3jipi"),l(k,"class","form-group svelte-a3jipi"),l(K,"class","svelte-a3jipi"),l(Q,"class","svelte-a3jipi"),l(W,"type","text"),l(W,"class","svelte-a3jipi"),l(O,"class","svelte-a3jipi"),l(Z,"class","svelte-a3jipi"),l(H,"type","text"),l(H,"class","svelte-a3jipi"),l(z,"class","svelte-a3jipi"),l(P,"type","range"),l(P,"min","-10"),l(P,"max","10"),l(P,"class","svelte-a3jipi"),l($,"class","svelte-a3jipi"),l(N,"type","text"),l(N,"class","svelte-a3jipi"),l(F,"class","svelte-a3jipi"),l(te,"class","form-group svelte-a3jipi"),l(o,"class","svelte-a3jipi")},m(a,p){le(a,n,p),le(a,c,p),le(a,m,p),le(a,v,p),le(a,o,p),t(o,u),t(u,g),t(u,x),t(u,j),t(j,I),t(I,b),t(I,q),t(I,B),E(B,e[0]),t(j,ae),t(j,A),t(A,U),t(A,be),t(A,R),E(R,e[1]),t(o,ye),t(o,k),t(k,Y),t(k,ge),t(k,G);for(let f=0;f<y.length;f+=1)y[f]&&y[f].m(G,null);t(o,je),t(o,te),t(te,D),t(D,K),t(D,we),t(D,O),t(O,Q),t(O,Ce),t(O,W),E(W,e[2]),t(D,Ee),t(D,X),t(X,z),t(z,Z),t(z,Le),t(z,H),E(H,e[4]),t(X,Ie),t(X,re),t(re,P),E(P,e[4]),t(D,Ae),t(D,F),t(F,$),t(F,Te),t(F,N),E(N,e[5]),t(o,Me),t(o,ne),xe||(He=[V(B,"input",e[8]),V(R,"input",e[9]),V(W,"input",e[11]),V(H,"input",e[12]),V(P,"change",e[13]),V(P,"input",e[13]),V(N,"input",e[14]),V(o,"submit",et(e[7]))],xe=!0)},p(a,[p]){if(p&1&&B.value!==a[0]&&E(B,a[0]),p&2&&R.value!==a[1]&&E(R,a[1]),p&72){se=Oe(a[3]);let f;for(f=0;f<se.length;f+=1){const ee=Fe(a,se,f);y[f]?y[f].p(ee,p):(y[f]=Je(ee),y[f].c(),y[f].m(G,null))}for(;f<y.length;f+=1)y[f].d(1);y.length=se.length}p&4&&W.value!==a[2]&&E(W,a[2]),p&16&&H.value!==a[4]&&E(H,a[4]),p&16&&E(P,a[4]),p&32&&N.value!==a[5]&&E(N,a[5])},i:ke,o:ke,d(a){a&&(d(n),d(c),d(m),d(v),d(o)),tt(y,a),xe=!1,Xe(He)}}}let _t=.5;function mt(e,n){const s=document.createElement("a");s.download=n,s.href=e,document.body.appendChild(s),s.click(),document.body.removeChild(s)}function bt(e,n="application/octet-stream"){return`data:${n};base64,${btoa(e)}`}function yt(e,n,s){let c=16,m=150,L=0,v=[0,0,0,0,200],o=0,u="";const g=["1分","2分","4分","8分","16分"];function S(){return BigInt(u===""?Date.now():u)}function x(){const A=BigUint64Array.from(v.map(BigInt)),U=S(),ie=ct(c,m,L,A,o,_t,U);if(ie===void 0){alert("BMS の生成に失敗しました。");return}mt(bt(ie),"result.bms")}function j(){c=this.value,s(0,c)}function I(){m=this.value,s(1,m)}function b(A,U){A[U]=this.value,s(3,v)}function w(){L=this.value,s(2,L)}function q(){o=this.value,s(4,o)}function B(){o=lt(this.value),s(4,o)}function ae(){u=this.value,s(5,u)}return[c,m,L,v,o,u,g,x,j,I,b,w,q,B,ae]}class Et extends Ze{constructor(n){super(),$e(this,n,yt,ht,Qe,{})}}export{Et as component,Ct as universal};
