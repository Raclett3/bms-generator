import{s as Ze,n as ze,r as $e}from"../chunks/scheduler.BvLojk_z.js";import{S as et,i as tt,e as r,s as _,g as o,z as B,c as m,j as w,d as h,p as l,a as le,l as n,A as T,B as N,C as nt,D as st,f as lt,k as at,E as it}from"../chunks/index.BonE5Z4V.js";import{b as rt}from"../chunks/paths.B31VBA5o.js";function Ge(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}let L,pe=0,oe=null;function ye(){return(oe===null||oe.byteLength===0)&&(oe=new Uint8Array(L.memory.buffer)),oe}const ge=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},ot=typeof ge.encodeInto=="function"?function(e,t){return ge.encodeInto(e,t)}:function(e,t){const s=ge.encode(e);return t.set(s),{read:e.length,written:s.length}};function ut(e,t,s){if(s===void 0){const a=ge.encode(e),p=t(a.length,1)>>>0;return ye().subarray(p,p+a.length).set(a),pe=a.length,p}let c=e.length,f=t(c,1)>>>0;const j=ye();let u=0;for(;u<c;u++){const a=e.charCodeAt(u);if(a>127)break;j[f+u]=a}if(u!==c){u!==0&&(e=e.slice(u)),f=s(f,c,c=u+e.length*3,1)>>>0;const a=ye().subarray(f+u,f+c),p=ot(e,a);u+=p.written,f=s(f,c,u,1)>>>0}return pe=u,f}let ue=null;function ct(){return(ue===null||ue.byteLength===0)&&(ue=new BigUint64Array(L.memory.buffer)),ue}function pt(e,t){const s=t(e.length*8,8)>>>0;return ct().set(e,s/8),pe=e.length,s}let ce=null;function Ye(){return(ce===null||ce.byteLength===0)&&(ce=new Int32Array(L.memory.buffer)),ce}const Qe=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Qe.decode();function ft(e,t){return e=e>>>0,Qe.decode(ye().subarray(e,e+t))}function dt(e,t,s,c,f,j,u,a){try{const I=L.__wbindgen_add_to_stack_pointer(-16),M=ut(s,L.__wbindgen_malloc,L.__wbindgen_realloc),E=pe,x=pt(f,L.__wbindgen_malloc),b=pe;L.generate_bms(I,e,t,M,E,c,x,b,j,u,a);var p=Ye()[I/4+0],C=Ye()[I/4+1];let y;return p!==0&&(y=ft(p,C).slice(),L.__wbindgen_free(p,C*1,1)),y}finally{L.__wbindgen_add_to_stack_pointer(16)}}async function vt(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(c){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",c);else throw c}const s=await e.arrayBuffer();return await WebAssembly.instantiate(s,t)}else{const s=await WebAssembly.instantiate(e,t);return s instanceof WebAssembly.Instance?{instance:s,module:e}:s}}function ht(){const e={};return e.wbg={},e}function _t(e,t){return L=e.exports,Xe.__wbindgen_wasm_module=t,ue=null,ce=null,oe=null,L}async function Xe(e){if(L!==void 0)return L;typeof e>"u"&&(e=new URL(""+new URL("../assets/wasm_bg.B0RjO3BU.wasm",import.meta.url).href,import.meta.url));const t=ht();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:s,module:c}=await vt(await e,t);return _t(s,c)}const mt=async()=>{await Xe()},Tt=Object.freeze(Object.defineProperty({__proto__:null,load:mt},Symbol.toStringTag,{value:"Module"}));function Je(e,t,s){const c=e.slice();return c[16]=t[s],c[17]=t,c[18]=s,c}function Ke(e){let t,s,c=e[6][e[18]]+"",f,j,u,a,p,C="%",I,M,E;function x(){e[10].call(u,e[17],e[18])}return{c(){t=r("label"),s=r("p"),f=lt(c),j=_(),u=r("input"),a=_(),p=r("div"),p.textContent=C,I=_(),this.h()},l(b){t=o(b,"LABEL",{class:!0});var y=w(t);s=o(y,"P",{class:!0});var V=w(s);f=at(V,c),V.forEach(h),j=m(y),u=o(y,"INPUT",{type:!0,class:!0}),a=m(y),p=o(y,"DIV",{class:!0,"data-svelte-h":!0}),B(p)!=="svelte-ea08ca"&&(p.textContent=C),I=m(y),y.forEach(h),this.h()},h(){l(s,"class","svelte-a3jipi"),l(u,"type","test"),l(u,"class","svelte-a3jipi"),l(p,"class","unit svelte-a3jipi"),l(t,"class","svelte-a3jipi")},m(b,y){le(b,t,y),n(t,s),n(s,f),n(t,j),n(t,u),T(u,e[16]),n(t,a),n(t,p),n(t,I),M||(E=N(u,"input",x),M=!0)},p(b,y){e=b,y&8&&T(u,e[16])},d(b){b&&h(t),M=!1,E()}}}function bt(e){let t,s="BMS自動生成くん",c,f,j=`<summary class="svelte-a3jipi"><h2 class="svelte-a3jipi">つかいかた</h2></summary> <div class="usage svelte-a3jipi"><p>パラメータを指定して生成ボタンを押すことで、ランダムなBMSの譜面を生成することが出来ます。</p> <p><a data-sveltekit-reload="" href="${rt}/bms-generator.zip">こちらのキー音</a>と同一のフォルダに入れてプレイヤーで読み込んでください。</p> <h3>譜面密度</h3> <p>n分間隔で降ってくるノーツの数を指定することが出来ます。</p> <p>例えば、100%を指定した場合1つ押し、200%を指定した場合は2つ押し、150%を指定した場合は1つ押しと2つ押しが半分ずつ生成されます。</p> <h3>縦連許容度</h3> <p>許容される縦連の長さを指定できます。</p> <p>xを指定した場合、x+1個までの縦連が生成されるようになります。</p> <p>小数を指定することもでき、例えば1.2を指定した場合は3個までの縦連が生成されますが、2を指定した場合に比べ出現率が下がります。</p> <h3>散らばり度</h3> <p>高い値を設定するほど、譜面の偏りを減らすことができます。負の値を設定することで、偏りを増やすことができます。</p> <p><b>極端に高い値(100など)を設定した場合、特定のパターンを繰り返す譜面が生成される場合があります。</b></p></div>`,u,a,p,C,I="基本情報",M,E,x,b,y="小節数",V,U,ae,A,D,ie="BPM",we,R,je,q,Y,Pe="譜面密度",Ce,J,Ee,te,S,K,Re='<h2 class="svelte-a3jipi">詳細設定</h2>',xe,O,Q,We="縦連許容度",Te,W,Le,X,F,Z,He="散らばり度",Ie,H,Ae,re,P,Be,z,$,ke="シード",Me,k,Ue,ne,Ne='<button type="submit" class="svelte-a3jipi">生成</button>',De,Ve,se=Ge(e[3]),g=[];for(let i=0;i<se.length;i+=1)g[i]=Ke(Je(e,se,i));return{c(){t=r("h1"),t.textContent=s,c=_(),f=r("details"),f.innerHTML=j,u=_(),a=r("form"),p=r("div"),C=r("h2"),C.textContent=I,M=_(),E=r("div"),x=r("label"),b=r("p"),b.textContent=y,V=_(),U=r("input"),ae=_(),A=r("label"),D=r("p"),D.textContent=ie,we=_(),R=r("input"),je=_(),q=r("div"),Y=r("h2"),Y.textContent=Pe,Ce=_(),J=r("div");for(let i=0;i<g.length;i+=1)g[i].c();Ee=_(),te=r("div"),S=r("details"),K=r("summary"),K.innerHTML=Re,xe=_(),O=r("label"),Q=r("p"),Q.textContent=We,Te=_(),W=r("input"),Le=_(),X=r("div"),F=r("label"),Z=r("p"),Z.textContent=He,Ie=_(),H=r("input"),Ae=_(),re=r("p"),P=r("input"),Be=_(),z=r("label"),$=r("p"),$.textContent=ke,Me=_(),k=r("input"),Ue=_(),ne=r("p"),ne.innerHTML=Ne,this.h()},l(i){t=o(i,"H1",{"data-svelte-h":!0}),B(t)!=="svelte-1q97hvc"&&(t.textContent=s),c=m(i),f=o(i,"DETAILS",{"data-svelte-h":!0}),B(f)!=="svelte-113sxsx"&&(f.innerHTML=j),u=m(i),a=o(i,"FORM",{class:!0});var d=w(a);p=o(d,"DIV",{class:!0});var v=w(p);C=o(v,"H2",{class:!0,"data-svelte-h":!0}),B(C)!=="svelte-qgn4gq"&&(C.textContent=I),M=m(v),E=o(v,"DIV",{class:!0});var ee=w(E);x=o(ee,"LABEL",{class:!0});var fe=w(x);b=o(fe,"P",{class:!0,"data-svelte-h":!0}),B(b)!=="svelte-jsefv9"&&(b.textContent=y),V=m(fe),U=o(fe,"INPUT",{type:!0,class:!0}),fe.forEach(h),ae=m(ee),A=o(ee,"LABEL",{class:!0});var de=w(A);D=o(de,"P",{class:!0,"data-svelte-h":!0}),B(D)!=="svelte-1d7zxdh"&&(D.textContent=ie),we=m(de),R=o(de,"INPUT",{type:!0,class:!0}),de.forEach(h),ee.forEach(h),v.forEach(h),je=m(d),q=o(d,"DIV",{class:!0});var ve=w(q);Y=o(ve,"H2",{class:!0,"data-svelte-h":!0}),B(Y)!=="svelte-8mkqas"&&(Y.textContent=Pe),Ce=m(ve),J=o(ve,"DIV",{class:!0});var qe=w(J);for(let Se=0;Se<g.length;Se+=1)g[Se].l(qe);qe.forEach(h),ve.forEach(h),Ee=m(d),te=o(d,"DIV",{class:!0});var Oe=w(te);S=o(Oe,"DETAILS",{});var G=w(S);K=o(G,"SUMMARY",{class:!0,"data-svelte-h":!0}),B(K)!=="svelte-5345tb"&&(K.innerHTML=Re),xe=m(G),O=o(G,"LABEL",{class:!0});var he=w(O);Q=o(he,"P",{class:!0,"data-svelte-h":!0}),B(Q)!=="svelte-yxr0l9"&&(Q.textContent=We),Te=m(he),W=o(he,"INPUT",{type:!0,class:!0}),he.forEach(h),Le=m(G),X=o(G,"DIV",{});var _e=w(X);F=o(_e,"LABEL",{class:!0});var me=w(F);Z=o(me,"P",{class:!0,"data-svelte-h":!0}),B(Z)!=="svelte-ylofxc"&&(Z.textContent=He),Ie=m(me),H=o(me,"INPUT",{type:!0,class:!0}),me.forEach(h),Ae=m(_e),re=o(_e,"P",{});var Fe=w(re);P=o(Fe,"INPUT",{type:!0,min:!0,max:!0,class:!0}),Fe.forEach(h),_e.forEach(h),Be=m(G),z=o(G,"LABEL",{class:!0});var be=w(z);$=o(be,"P",{class:!0,"data-svelte-h":!0}),B($)!=="svelte-1v97jri"&&($.textContent=ke),Me=m(be),k=o(be,"INPUT",{type:!0,class:!0}),be.forEach(h),G.forEach(h),Oe.forEach(h),Ue=m(d),ne=o(d,"P",{"data-svelte-h":!0}),B(ne)!=="svelte-1vtn6gv"&&(ne.innerHTML=Ne),d.forEach(h),this.h()},h(){l(C,"class","svelte-a3jipi"),l(b,"class","svelte-a3jipi"),l(U,"type","text"),l(U,"class","svelte-a3jipi"),l(x,"class","svelte-a3jipi"),l(D,"class","svelte-a3jipi"),l(R,"type","text"),l(R,"class","svelte-a3jipi"),l(A,"class","svelte-a3jipi"),l(E,"class","form-flex svelte-a3jipi"),l(p,"class","form-group svelte-a3jipi"),l(Y,"class","svelte-a3jipi"),l(J,"class","form-flex svelte-a3jipi"),l(q,"class","form-group svelte-a3jipi"),l(K,"class","svelte-a3jipi"),l(Q,"class","svelte-a3jipi"),l(W,"type","text"),l(W,"class","svelte-a3jipi"),l(O,"class","svelte-a3jipi"),l(Z,"class","svelte-a3jipi"),l(H,"type","text"),l(H,"class","svelte-a3jipi"),l(F,"class","svelte-a3jipi"),l(P,"type","range"),l(P,"min","-10"),l(P,"max","10"),l(P,"class","svelte-a3jipi"),l($,"class","svelte-a3jipi"),l(k,"type","text"),l(k,"class","svelte-a3jipi"),l(z,"class","svelte-a3jipi"),l(te,"class","form-group svelte-a3jipi"),l(a,"class","svelte-a3jipi")},m(i,d){le(i,t,d),le(i,c,d),le(i,f,d),le(i,u,d),le(i,a,d),n(a,p),n(p,C),n(p,M),n(p,E),n(E,x),n(x,b),n(x,V),n(x,U),T(U,e[0]),n(E,ae),n(E,A),n(A,D),n(A,we),n(A,R),T(R,e[1]),n(a,je),n(a,q),n(q,Y),n(q,Ce),n(q,J);for(let v=0;v<g.length;v+=1)g[v]&&g[v].m(J,null);n(a,Ee),n(a,te),n(te,S),n(S,K),n(S,xe),n(S,O),n(O,Q),n(O,Te),n(O,W),T(W,e[2]),n(S,Le),n(S,X),n(X,F),n(F,Z),n(F,Ie),n(F,H),T(H,e[4]),n(X,Ae),n(X,re),n(re,P),T(P,e[4]),n(S,Be),n(S,z),n(z,$),n(z,Me),n(z,k),T(k,e[5]),n(a,Ue),n(a,ne),De||(Ve=[N(U,"input",e[8]),N(R,"input",e[9]),N(W,"input",e[11]),N(H,"input",e[12]),N(P,"change",e[13]),N(P,"input",e[13]),N(k,"input",e[14]),N(a,"submit",nt(e[7]))],De=!0)},p(i,[d]){if(d&1&&U.value!==i[0]&&T(U,i[0]),d&2&&R.value!==i[1]&&T(R,i[1]),d&72){se=Ge(i[3]);let v;for(v=0;v<se.length;v+=1){const ee=Je(i,se,v);g[v]?g[v].p(ee,d):(g[v]=Ke(ee),g[v].c(),g[v].m(J,null))}for(;v<g.length;v+=1)g[v].d(1);g.length=se.length}d&4&&W.value!==i[2]&&T(W,i[2]),d&16&&H.value!==i[4]&&T(H,i[4]),d&16&&T(P,i[4]),d&32&&k.value!==i[5]&&T(k,i[5])},i:ze,o:ze,d(i){i&&(h(t),h(c),h(f),h(u),h(a)),st(g,i),De=!1,$e(Ve)}}}let yt=.5;function gt(e,t){const s=document.createElement("a");s.download=t,s.href=e,document.body.appendChild(s),s.click(),document.body.removeChild(s)}function wt(e,t="application/octet-stream"){return`data:${t};base64,${btoa(e)}`}function jt(e,t,s){let c=16,f=150,j=0,u=[0,0,0,0,200],a=0,p="";const C=["1分","2分","4分","8分","16分"];function I(){return BigInt(p===""?Date.now():p)}function M(){const A=BigUint64Array.from(u.map(BigInt)),D=I(),ie=dt(c,f,"Auto Generated",j,A,a,yt,D);if(ie===void 0){alert("BMS の生成に失敗しました。");return}gt(wt(ie),"result.bms")}function E(){c=this.value,s(0,c)}function x(){f=this.value,s(1,f)}function b(A,D){A[D]=this.value,s(3,u)}function y(){j=this.value,s(2,j)}function V(){a=this.value,s(4,a)}function U(){a=it(this.value),s(4,a)}function ae(){p=this.value,s(5,p)}return[c,f,j,u,a,p,C,M,E,x,b,y,V,U,ae]}class Lt extends et{constructor(t){super(),tt(this,t,jt,bt,Ze,{})}}export{Lt as component,Tt as universal};
